import{a7 as X,o as a,m as d,b as l,w as i,F as O,p as le,c as n,j as Y,h as D,V as G,e as c,t as y,S as x,aM as M,v as N,f as q,n as me,q as F,g as v,i as R,X as p,Y as w,a8 as ee,aN as te,aC as ae,T as ie,H as se,au as ce}from"./index-809c946b.js";import{_ as de}from"./_plugin-vue_export-helper-c27b6911.js";const ue={name:"ListConfigItem",props:{value:{type:Array,default:()=>[]},label:{type:String,default:""}},data(){return{newItem:"",items:this.value,editIndex:-1,editItem:""}},watch:{items(r){this.$emit("input",r)}},methods:{addItem(){this.newItem.trim()!==""&&(this.items.push(this.newItem.trim()),this.newItem="")},removeItem(r){this.items.splice(r,1)},startEdit(r,m){this.editIndex=r,this.editItem=m},saveEdit(){this.editItem.trim()!==""&&(this.items[this.editIndex]=this.editItem.trim(),this.cancelEdit())},cancelEdit(){this.editIndex=-1,this.editItem=""}}},oe={class:"list-config-item"},ye={key:2},_e={key:3},fe={style:{display:"flex","align-items":"center"}};function be(r,m,e,ne,V,K){const H=X("v-list-item-content");return a(),d("div",oe,[l(me,{dense:"",style:{"background-color":"transparent","max-height":"300px","overflow-y":"auto"}},{default:i(()=>[(a(!0),d(O,null,le(V.items,(I,h)=>(a(),n(Y,{key:h},{default:i(()=>[l(H,{style:{display:"flex","justify-content":"space-between"}},{default:i(()=>[V.editIndex!==h?(a(),n(D,{key:0},{default:i(()=>[l(G,{size:"small",label:"",color:"primary"},{default:i(()=>[c(y(I),1)]),_:2},1024)]),_:2},1024)):(a(),n(x,{key:1,modelValue:V.editItem,"onUpdate:modelValue":m[0]||(m[0]=_=>V.editItem=_),dense:"","hide-details":"",variant:"outlined",density:"compact",onKeyup:[M(K.saveEdit,["enter"]),M(K.cancelEdit,["esc"])],autofocus:""},null,8,["modelValue","onKeyup"])),V.editIndex!==h?(a(),d("div",ye,[l(N,{onClick:_=>K.startEdit(h,I),variant:"plain",class:"edit-btn",icon:"",size:"small"},{default:i(()=>[l(q,null,{default:i(()=>[c("mdi-pencil")]),_:1})]),_:2},1032,["onClick"]),l(N,{onClick:_=>K.removeItem(h),variant:"plain",icon:"",size:"small"},{default:i(()=>[l(q,null,{default:i(()=>[c("mdi-close")]),_:1})]),_:2},1032,["onClick"])])):(a(),d("div",_e,[l(N,{onClick:K.saveEdit,variant:"plain",color:"success",icon:"",size:"small"},{default:i(()=>[l(q,null,{default:i(()=>[c("mdi-check")]),_:1})]),_:1},8,["onClick"]),l(N,{onClick:K.cancelEdit,variant:"plain",color:"error",icon:"",size:"small"},{default:i(()=>[l(q,null,{default:i(()=>[c("mdi-close")]),_:1})]),_:1},8,["onClick"])]))]),_:2},1024)]),_:2},1024))),128))]),_:1}),F("div",fe,[l(x,{modelValue:V.newItem,"onUpdate:modelValue":m[1]||(m[1]=I=>V.newItem=I),label:"添加新项，按回车确认添加",onKeyup:M(K.addItem,["enter"]),clearable:"",dense:"","hide-details":"",variant:"outlined",density:"compact"},null,8,["modelValue","onKeyup"]),l(N,{onClick:K.addItem,text:"",variant:"tonal"},{default:i(()=>[l(q,null,{default:i(()=>[c("mdi-plus")]),_:1}),c(" 添加 ")]),_:1},8,["onClick"])])])}const ve=de(ue,[["render",be],["__scopeId","data-v-cb0d926e"]]);const Ke={name:"AstrBotConfig",components:{ListConfigItem:ve},props:{metadata:{type:Object,required:!0},iterable:{type:Object,required:!0},metadataKey:{type:String,required:!0}}},Ve={key:0,class:"config-section"},he={class:"metadata-key"},ge={key:0,class:"important-hint"},re={key:0,class:"object-config"},Ie={key:0,class:"nested-object"},Ce={key:0,class:"nested-container"},xe={key:0},we={class:"property-key"},Ue={key:1},Ee={key:0,class:"important-hint"},je={key:0,class:"w-100"},Be={key:1,class:"w-100"},Le={key:1,class:"simple-config"},ke={class:"property-key"},ze={key:0,class:"important-hint"},Ae={class:"w-100"};function Se(r,m,e,ne,V,K){var h;const H=X("AstrBotConfig",!0),I=X("ListConfigItem");return a(),d(O,null,[e.iterable&&((h=e.metadata[e.metadataKey])==null?void 0:h.type)==="object"?(a(),d("div",Ve,[l(D,{class:"config-title"},{default:i(()=>{var _;return[c(y((_=e.metadata[e.metadataKey])==null?void 0:_.description)+" ",1),F("span",he,"("+y(e.metadataKey)+")",1)]}),_:1}),l(R,{class:"config-hint"},{default:i(()=>{var _,U,s;return[(_=e.metadata[e.metadataKey])!=null&&_.obvious_hint&&((U=e.metadata[e.metadataKey])!=null&&U.hint)?(a(),d("span",ge,"‼️")):v("",!0),c(" "+y((s=e.metadata[e.metadataKey])==null?void 0:s.hint),1)]}),_:1})])):v("",!0),l(se,{class:"px-0 py-1"},{default:i(()=>{var _,U;return[((_=e.metadata[e.metadataKey])==null?void 0:_.type)==="object"||(U=e.metadata[e.metadataKey])!=null&&U.config_template?(a(),d("div",re,[(a(!0),d(O,null,le(e.iterable,(s,t,C)=>{var E,j,B,L;return a(),d("div",{key:t,class:"config-item"},[((E=e.metadata[e.metadataKey].items[t])==null?void 0:E.type)==="object"?(a(),d("div",Ie,[e.metadata[e.metadataKey].items[t]&&!((j=e.metadata[e.metadataKey].items[t])!=null&&j.invisible)?(a(),d("div",Ce,[l(ce,null,{default:i(()=>[l(H,{metadata:e.metadata[e.metadataKey].items,iterable:e.iterable[t],metadataKey:t},null,8,["metadata","iterable","metadataKey"])]),_:2},1024)])):v("",!0)])):(a(),d(O,{key:1},[(B=e.metadata[e.metadataKey].items[t])!=null&&B.invisible?v("",!0):(a(),n(p,{key:0,class:"config-row"},{default:i(()=>[l(w,{cols:"12",sm:"6",class:"property-info"},{default:i(()=>[l(Y,{density:"compact"},{default:i(()=>[l(D,{class:"property-name"},{default:i(()=>{var u,o;return[(u=e.metadata[e.metadataKey].items[t])!=null&&u.description?(a(),d("span",xe,[c(y((o=e.metadata[e.metadataKey].items[t])==null?void 0:o.description)+" ",1),F("span",we,"("+y(t)+")",1)])):(a(),d("span",Ue,y(t),1))]}),_:2},1024),l(R,{class:"property-hint"},{default:i(()=>{var u,o,g;return[(u=e.metadata[e.metadataKey].items[t])!=null&&u.obvious_hint&&((o=e.metadata[e.metadataKey].items[t])!=null&&o.hint)?(a(),d("span",Ee,"‼️")):v("",!0),c(" "+y((g=e.metadata[e.metadataKey].items[t])==null?void 0:g.hint),1)]}),_:2},1024)]),_:2},1024)]),_:2},1024),l(w,{cols:"12",sm:"1",class:"d-flex align-center type-indicator"},{default:i(()=>{var u;return[(u=e.metadata[e.metadataKey].items[t])!=null&&u.invisible?v("",!0):(a(),n(G,{key:0,color:"primary",label:"",size:"x-small",variant:"flat"},{default:i(()=>{var o;return[c(y(((o=e.metadata[e.metadataKey].items[t])==null?void 0:o.type)||"string"),1)]}),_:2},1024))]}),_:2},1024),l(w,{cols:"12",sm:"5",class:"config-input"},{default:i(()=>{var u,o,g,k,z,A,S,T,f,J,P,Q,W,Z,$;return[e.metadata[e.metadataKey].items[t]?(a(),d("div",je,[(u=e.metadata[e.metadataKey].items[t])!=null&&u.options&&!((o=e.metadata[e.metadataKey].items[t])!=null&&o.invisible)?(a(),n(ee,{key:0,modelValue:e.iterable[t],"onUpdate:modelValue":b=>e.iterable[t]=b,items:(g=e.metadata[e.metadataKey].items[t])==null?void 0:g.options,disabled:(k=e.metadata[e.metadataKey].items[t])==null?void 0:k.readonly,density:"compact",variant:"outlined",class:"config-field","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items","disabled"])):((z=e.metadata[e.metadataKey].items[t])==null?void 0:z.type)==="string"&&!((A=e.metadata[e.metadataKey].items[t])!=null&&A.invisible)?(a(),n(x,{key:1,modelValue:e.iterable[t],"onUpdate:modelValue":b=>e.iterable[t]=b,density:"compact",variant:"outlined",class:"config-field","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])):(((S=e.metadata[e.metadataKey].items[t])==null?void 0:S.type)==="int"||((T=e.metadata[e.metadataKey].items[t])==null?void 0:T.type)==="float")&&!((f=e.metadata[e.metadataKey])!=null&&f.invisible)?(a(),n(x,{key:2,modelValue:e.iterable[t],"onUpdate:modelValue":b=>e.iterable[t]=b,density:"compact",variant:"outlined",class:"config-field",type:"number","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])):((J=e.metadata[e.metadataKey].items[t])==null?void 0:J.type)==="text"&&!((P=e.metadata[e.metadataKey].items[t])!=null&&P.invisible)?(a(),n(te,{key:3,modelValue:e.iterable[t],"onUpdate:modelValue":b=>e.iterable[t]=b,variant:"outlined",rows:"3",class:"config-field","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])):((Q=e.metadata[e.metadataKey].items[t])==null?void 0:Q.type)==="bool"&&!((W=e.metadata[e.metadataKey].items[t])!=null&&W.invisible)?(a(),n(ae,{key:4,modelValue:e.iterable[t],"onUpdate:modelValue":b=>e.iterable[t]=b,color:"primary",inset:"",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])):((Z=e.metadata[e.metadataKey].items[t])==null?void 0:Z.type)==="list"&&!(($=e.metadata[e.metadataKey].items[t])!=null&&$.invisible)?(a(),n(I,{key:5,value:e.iterable[t],class:"config-field"},null,8,["value"])):v("",!0)])):(a(),d("div",Be,[l(x,{modelValue:e.iterable[t],"onUpdate:modelValue":b=>e.iterable[t]=b,label:t,density:"compact",variant:"outlined",class:"config-field","hide-details":""},null,8,["modelValue","onUpdate:modelValue","label"])]))]}),_:2},1024)]),_:2},1024)),C!==Object.keys(e.iterable).length-1&&!((L=e.metadata[e.metadataKey].items[t])!=null&&L.invisible)?(a(),n(ie,{key:1,class:"config-divider"})):v("",!0)],64))])}),128))])):(a(),d("div",Le,[l(p,{class:"config-row"},{default:i(()=>[l(w,{cols:"12",sm:"6",class:"property-info"},{default:i(()=>[l(Y,{density:"compact"},{default:i(()=>[l(D,{class:"property-name"},{default:i(()=>{var s;return[c(y((s=e.metadata[e.metadataKey])==null?void 0:s.description)+" ",1),F("span",ke,"("+y(e.metadataKey)+")",1)]}),_:1}),l(R,{class:"property-hint"},{default:i(()=>{var s,t,C;return[(s=e.metadata[e.metadataKey])!=null&&s.obvious_hint&&((t=e.metadata[e.metadataKey])!=null&&t.hint)?(a(),d("span",ze,"‼️")):v("",!0),c(" "+y((C=e.metadata[e.metadataKey])==null?void 0:C.hint),1)]}),_:1})]),_:1})]),_:1}),l(w,{cols:"12",sm:"1",class:"d-flex align-center type-indicator"},{default:i(()=>{var s;return[(s=e.metadata[e.metadataKey])!=null&&s.invisible?v("",!0):(a(),n(G,{key:0,color:"primary",label:"",size:"x-small",variant:"flat"},{default:i(()=>{var t;return[c(y((t=e.metadata[e.metadataKey])==null?void 0:t.type),1)]}),_:1}))]}),_:1}),l(w,{cols:"12",sm:"5",class:"config-input"},{default:i(()=>{var s,t,C,E,j,B,L,u,o,g,k,z,A,S,T;return[F("div",Ae,[(s=e.metadata[e.metadataKey])!=null&&s.options&&!((t=e.metadata[e.metadataKey])!=null&&t.invisible)?(a(),n(ee,{key:0,modelValue:e.iterable[e.metadataKey],"onUpdate:modelValue":m[0]||(m[0]=f=>e.iterable[e.metadataKey]=f),items:(C=e.metadata[e.metadataKey])==null?void 0:C.options,disabled:(E=e.metadata[e.metadataKey])==null?void 0:E.readonly,density:"compact",variant:"outlined",class:"config-field","hide-details":""},null,8,["modelValue","items","disabled"])):((j=e.metadata[e.metadataKey])==null?void 0:j.type)==="string"&&!((B=e.metadata[e.metadataKey])!=null&&B.invisible)?(a(),n(x,{key:1,modelValue:e.iterable[e.metadataKey],"onUpdate:modelValue":m[1]||(m[1]=f=>e.iterable[e.metadataKey]=f),density:"compact",variant:"outlined",class:"config-field","hide-details":""},null,8,["modelValue"])):(((L=e.metadata[e.metadataKey])==null?void 0:L.type)==="int"||((u=e.metadata[e.metadataKey])==null?void 0:u.type)==="float")&&!((o=e.metadata[e.metadataKey])!=null&&o.invisible)?(a(),n(x,{key:2,modelValue:e.iterable[e.metadataKey],"onUpdate:modelValue":m[2]||(m[2]=f=>e.iterable[e.metadataKey]=f),density:"compact",variant:"outlined",class:"config-field",type:"number","hide-details":""},null,8,["modelValue"])):((g=e.metadata[e.metadataKey])==null?void 0:g.type)==="text"&&!((k=e.metadata[e.metadataKey])!=null&&k.invisible)?(a(),n(te,{key:3,modelValue:e.iterable[e.metadataKey],"onUpdate:modelValue":m[3]||(m[3]=f=>e.iterable[e.metadataKey]=f),variant:"outlined","auto-grow":"",rows:"3",class:"config-field","hide-details":""},null,8,["modelValue"])):((z=e.metadata[e.metadataKey])==null?void 0:z.type)==="bool"&&!((A=e.metadata[e.metadataKey])!=null&&A.invisible)?(a(),n(ae,{key:4,modelValue:e.iterable[e.metadataKey],"onUpdate:modelValue":m[4]||(m[4]=f=>e.iterable[e.metadataKey]=f),color:"primary",inset:"",density:"compact","hide-details":""},null,8,["modelValue"])):((S=e.metadata[e.metadataKey])==null?void 0:S.type)==="list"&&!((T=e.metadata[e.metadataKey])!=null&&T.invisible)?(a(),n(I,{key:5,value:e.iterable[e.metadataKey],class:"config-field"},null,8,["value"])):v("",!0)])]}),_:1})]),_:1}),l(ie,{class:"my-2 config-divider"})]))]}),_:1})],64)}const qe=de(Ke,[["render",Se],["__scopeId","data-v-9e8f62c0"]]);export{qe as A};
