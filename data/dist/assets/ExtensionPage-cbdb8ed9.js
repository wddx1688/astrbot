import{H as ne,E as Ie}from"./github-d8d05c61.js";import{W as Me}from"./WaitingForRestart-f77d905b.js";import{A as Ae}from"./AstrBotConfig-b6194601.js";import{C as He}from"./ConsoleDisplayer-6264eb94.js";import{r as g,ab as we,o as i,c as y,w as e,b as t,G as O,v as c,f as m,e as o,T as be,H as T,q as n,g as w,m as h,a9 as se,t as p,U as F,D as j,E as P,W as G,l as x,ac as K,ad as xe,k as Ne,X as N,ae as Be,F as J,Y as B,af as Oe,ag as Fe,ah as Ce,S as Ge,y as Ve,ai as We,aj as qe,R as $e,V as ae,x as z,p as le,ak as Ke,al as Je,am as Xe,an as Ye,ao as Qe,ap as Ze,n as et,j as X,h as Y,aq as tt,L as at,a5 as lt,a6 as st}from"./index-809c946b.js";import{m as ze}from"./marked.esm-7c36e8b8.js";import{u as ot}from"./common-a3b3ada7.js";import{_ as nt}from"./_plugin-vue_export-helper-c27b6911.js";const rt=n("span",{class:"text-h5"},"插件说明文档",-1),it={class:"d-flex justify-space-between mb-4"},dt={key:0,class:"d-flex flex-column align-center justify-center",style:{height:"100%"}},ut=n("p",{class:"text-body-1 text-center"},"正在加载README文档...",-1),ct=["innerHTML"],ft={key:2,class:"d-flex flex-column align-center justify-center",style:{height:"100%"}},mt={class:"text-body-1 text-center mb-4"},pt={key:3,class:"d-flex flex-column align-center justify-center",style:{height:"100%"}},_t=n("p",{class:"text-body-1 text-center mb-4"},[o("该插件未提供文档链接或GitHub仓库地址。"),n("br"),o("请查看插件市场或联系插件作者获取更多信息。")],-1),vt={name:"ReadmeDialog",computed:{_show:{get(){return this.show},set($){this.$emit("update:show",$)}}}},gt=Object.assign(vt,{props:{show:{type:Boolean,default:!1},pluginName:{type:String,default:""},repoUrl:{type:String,default:null}},emits:["update:show"],setup($,{emit:re}){const _=$,b=g(null),E=g(null),U=g(!1);we(()=>_.show,d=>{d&&_.pluginName&&I()}),we(()=>_.pluginName,d=>{_.show&&d&&I()});async function I(){if(_.pluginName){U.value=!0,b.value=null,E.value=null;try{const d=await x.get(`/api/plugin/readme?name=${_.pluginName}`);d.data.status==="ok"?b.value=d.data.data.content:E.value=d.data.message||"获取README失败"}catch(d){E.value=d.message||"获取README时发生错误"}finally{U.value=!1}}}function D(){_.repoUrl&&window.open(_.repoUrl,"_blank")}function V(d){return d?(ze.setOptions({highlight:function(v,k){if(k&&ne.getLanguage(k))try{return ne.highlight(v,{language:k}).value}catch(W){console.error(W)}return ne.highlightAuto(v).value},gfm:!0,breaks:!0,headerIds:!0,mangle:!1}),ze(d)):""}function Q(){I()}return(d,v)=>(i(),y(G,{modelValue:d._show,"onUpdate:modelValue":v[4]||(v[4]=k=>d._show=k),width:"800",persistent:""},{default:e(()=>[t(P,null,{default:e(()=>[t(O,{class:"d-flex justify-space-between align-center"},{default:e(()=>[rt,t(c,{icon:"",onClick:v[0]||(v[0]=k=>d.$emit("update:show",!1))},{default:e(()=>[t(m,null,{default:e(()=>[o("mdi-close")]),_:1})]),_:1})]),_:1}),t(be),t(T,{style:{height:"70vh","overflow-y":"auto"}},{default:e(()=>[n("div",it,[$.repoUrl?(i(),y(c,{key:0,color:"primary","prepend-icon":"mdi-github",onClick:v[1]||(v[1]=k=>D())},{default:e(()=>[o(" 在GitHub中查看仓库 ")]),_:1})):w("",!0),t(c,{color:"secondary","prepend-icon":"mdi-refresh",onClick:v[2]||(v[2]=k=>Q())},{default:e(()=>[o(" 刷新文档 ")]),_:1})]),U.value?(i(),h("div",dt,[t(se,{indeterminate:"",color:"primary",size:"64",class:"mb-4"}),ut])):b.value?(i(),h("div",{key:1,class:"markdown-body",innerHTML:V(b.value)},null,8,ct)):E.value?(i(),h("div",ft,[t(m,{size:"64",color:"error",class:"mb-4"},{default:e(()=>[o("mdi-alert-circle-outline")]),_:1}),n("p",mt,p(E.value),1)])):(i(),h("div",pt,[t(m,{size:"64",color:"warning",class:"mb-4"},{default:e(()=>[o("mdi-file-question-outline")]),_:1}),_t]))]),_:1}),t(be),t(F,null,{default:e(()=>[t(j),t(c,{color:"primary",variant:"tonal",onClick:v[3]||(v[3]=k=>d.$emit("update:show",!1))},{default:e(()=>[o(" 关闭 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});const C=$=>(lt("data-v-88998581"),$=$(),st(),$),ht={class:"plugin-page-icon d-flex justify-center align-center rounded-lg mr-4"},yt={class:"search-container rounded-lg"},kt={class:"text-body-1"},wt=C(()=>n("p",{class:"text-caption mt-2"},"详情请检查控制台",-1)),bt={key:0},xt=C(()=>n("span",{class:"ml-2"},"加载中...",-1)),Ct={class:"d-flex align-center py-2"},Vt={class:"text-subtitle-1 font-weight-medium"},$t={key:0,class:"d-flex align-center mt-1"},zt={class:"text-body-2 text-medium-emphasis"},Et={class:"d-flex align-center"},Pt={class:"text-body-2"},Ut={class:"text-body-2"},Dt={class:"d-flex align-center"},St={class:"text-center pa-8"},Lt=C(()=>n("div",{class:"text-h5 mb-2"},"暂无插件",-1)),Rt=C(()=>n("div",{class:"text-body-1 mb-4"},"尝试安装插件或者显示系统插件",-1)),Tt={key:1},jt=C(()=>n("div",{class:"text-h5 mb-2"},"暂无插件",-1)),It=C(()=>n("div",{class:"text-body-1 mb-4"},"尝试安装插件或者显示系统插件",-1)),Mt=C(()=>n("p",{class:"text-body-2 mb-4"},"设置每个插件在不同平台上的可用性，勾选表示启用",-1)),At={key:0,class:"text-center pa-8"},Ht=C(()=>n("div",{class:"text-h5 mb-2"},"未找到平台适配器",-1)),Nt=C(()=>n("div",{class:"text-body-1 mb-4"},[o("请先在 "),n("strong",null,"平台管理"),o(" 中添加并配置平台适配器，然后再设置插件的平台可用性")],-1)),Bt=C(()=>n("th",{class:"text-left"},"插件名称",-1)),Ot={class:"d-flex align-center"},Ft={class:"d-flex align-center"},Gt={class:"text-caption text-grey"},Wt={key:1},qt={key:1,class:"py-8 text-center"},Kt={class:"text-h4 font-weight-bold"},Jt={style:{"margin-top":"32px"}},Xt=C(()=>n("h3",null,"日志",-1)),Yt={style:{"font-weight":"bold"}},Qt={style:{"font-weight":"bold"}},Zt={__name:"ExtensionPage",setup($){const re=ot(),_=K({data:[],message:""}),b=g(!1),E=g(""),U=g(!1),I=g("success"),D=g(!1),V=K({metadata:{},config:{}}),Q=g([]),d=K({show:!1,title:"加载中...",statusCode:0,result:""}),v=g(!1),k=g({}),W=g(""),Ee=g(null),S=K({show:!1,pluginName:"",repoUrl:null}),M=g(!1),u=K({platforms:[],plugins:[],platform_enable:{}}),q=g(!1),L=g(!1),Z=g(""),ee=g(!1),Pe=[{title:"行为类型",key:"event_type_h"},{title:"描述",key:"desc",maxWidth:"250px"},{title:"具体类型",key:"type"},{title:"触发方式",key:"cmd"}],Ue=[{title:"名称",key:"name",width:"200px"},{title:"描述",key:"desc",maxWidth:"250px"},{title:"版本",key:"version",width:"100px"},{title:"作者",key:"author",width:"100px"},{title:"状态",key:"status",width:"80px"},{title:"操作",key:"actions",sortable:!1,width:"220px"}],ie=xe(()=>{var s;return b.value?_.data||[]:((s=_==null?void 0:_.data)==null?void 0:s.filter(l=>!l.reserved))||[]}),oe=xe(()=>{if(!Z.value)return ie.value;const s=Z.value.toLowerCase();return ie.value.filter(l=>{var a,r,H;return((a=l.name)==null?void 0:a.toLowerCase().includes(s))||((r=l.desc)==null?void 0:r.toLowerCase().includes(s))||((H=l.author)==null?void 0:H.toLowerCase().includes(s))})}),De=()=>{b.value=!b.value},f=(s,l)=>{E.value=s,U.value=!0,I.value=l},de=()=>{d.show=!1,d.title="加载中...",d.statusCode=0,d.result=""},ue=(s,l,a=2e3)=>{d.statusCode=s,d.result=l,a!==-1&&setTimeout(de,a)},A=async()=>{ee.value=!0;try{const s=await x.get("/api/plugin/get");Object.assign(_,s.data),ce()}catch(s){f(s,"error")}finally{ee.value=!1}},ce=()=>{const s=new Map,l=new Map;Q.value.forEach(a=>{a.repo&&s.set(a.repo.toLowerCase(),a),l.set(a.name,a)}),_.data.forEach(a=>{var ke;const r=(ke=a.repo)==null?void 0:ke.toLowerCase(),H=r?s.get(r):null,je=l.get(a.name),R=H||je;R?(a.online_version=R.version,a.has_update=a.version!==R.version&&R.version!=="未知"):a.has_update=!1,a.logo=R==null?void 0:R.logo})},fe=async s=>{f("正在卸载"+s,"primary");try{const l=await x.post("/api/plugin/uninstall",{name:s});if(l.data.status==="error"){f(l.data.message,"error");return}Object.assign(_,l.data),f(l.data.message,"success"),A()}catch(l){f(l,"error")}},me=async s=>{d.show=!0;try{const l=await x.post("/api/plugin/update",{name:s,proxy:localStorage.getItem("selectedGitHubProxy")||""});if(l.data.status==="error"){ue(2,l.data.message,-1);return}Object.assign(_,l.data),ue(1,l.data.message)}catch(l){f(l,"error")}},pe=async s=>{try{const l=await x.post("/api/plugin/on",{name:s.name});if(l.data.status==="error"){f(l.data.message,"error");return}f(l.data.message,"success"),A()}catch(l){f(l,"error")}},_e=async s=>{try{const l=await x.post("/api/plugin/off",{name:s.name});if(l.data.status==="error"){f(l.data.message,"error");return}f(l.data.message,"success"),A()}catch(l){f(l,"error")}},ve=async s=>{W.value=s,D.value=!0;try{const l=await x.get("/api/config/get?plugin_name="+s);V.metadata=l.data.data.metadata,V.config=l.data.data.config}catch(l){f(l,"error")}},Se=async()=>{try{const s=await x.post("/api/config/plugin/update?plugin_name="+W.value,V.config);s.data.status==="ok"?f(s.data.message,"success"):f(s.data.message,"error"),D.value=!1,V.metadata={},V.config={},A()}catch(s){f(s,"error")}},ge=s=>{k.value=s,v.value=!0},he=async s=>{try{const l=await x.post("/api/plugin/reload",{name:s});if(l.data.status==="error"){f(l.data.message,"error");return}f("重载成功","success"),A()}catch(l){f(l,"error")}},ye=s=>{S.pluginName=s.name,S.repoUrl=s.repo,S.show=!0},Le=async()=>{q.value=!0;try{const s=await x.get("/api/plugin/platform_enable/get");if(s.data.status==="error"){f(s.data.message,"error");return}u.platforms=s.data.data.platforms,u.plugins=s.data.data.plugins,u.platform_enable=s.data.data.platform_enable,u.platforms.length===0?f("未添加任何平台适配器，请先在平台管理中添加平台","warning"):u.platforms.forEach(l=>{u.platform_enable[l.name]||(u.platform_enable[l.name]={}),u.plugins.forEach(a=>{u.platform_enable[l.name][a.name]===void 0&&(u.platform_enable[l.name][a.name]=!0)})}),M.value=!0}catch(s){f("获取平台插件配置失败: "+s,"error")}finally{q.value=!1}},Re=async()=>{q.value=!0;try{const s=await x.post("/api/plugin/platform_enable/set",{platform_enable:u.platform_enable});if(s.data.status==="error"){f(s.data.message,"error");return}f(s.data.message,"success"),M.value=!1}catch(s){f("保存平台插件配置失败: "+s,"error")}finally{q.value=!1}},te=(s,l,a=null)=>{u.platform_enable[s]||(u.platform_enable[s]={}),u.plugins.forEach(r=>{(a===null||r.reserved===a)&&(u.platform_enable[s][r.name]=l)})},Te=s=>{u.platform_enable[s]||(u.platform_enable[s]={}),u.plugins.forEach(l=>{const a=u.platform_enable[s][l.name];u.platform_enable[s][l.name]=!a})};return Ne(async()=>{await A();try{const s=await re.getPluginCollections();Q.value=s,ce()}catch(s){console.error("获取插件市场数据失败:",s)}}),(s,l)=>(i(),h(J,null,[t(N,null,{default:e(()=>[t(B,{cols:"12",md:"12"},{default:e(()=>[t(P,{variant:"flat",class:"rounded-xl"},{default:e(()=>[t(Oe,null,{prepend:e(()=>[n("div",ht,[t(m,{size:"36",color:"primary"},{default:e(()=>[o("mdi-puzzle")]),_:1})])]),default:e(()=>[t(O,{class:"text-h4 font-weight-bold"},{default:e(()=>[o(" 已安装的插件 ")]),_:1}),t(Fe,{class:"text-subtitle-1 mt-1 text-medium-emphasis"},{default:e(()=>[o(" 管理已经安装的所有插件 ")]),_:1})]),_:1}),t(T,{class:"pt-2"},{default:e(()=>[t(N,{class:"mb-4"},{default:e(()=>[t(B,{cols:"12",sm:"6",md:"6",class:"d-flex align-center"},{default:e(()=>[t(Ce,{variant:"outlined",density:"comfortable",color:"primary"},{default:e(()=>[t(c,{onClick:l[0]||(l[0]=a=>L.value=!1),color:L.value?void 0:"primary",variant:L.value?"outlined":"flat"},{default:e(()=>[t(m,null,{default:e(()=>[o("mdi-view-grid")]),_:1})]),_:1},8,["color","variant"]),t(c,{onClick:l[1]||(l[1]=a=>L.value=!0),color:L.value?"primary":void 0,variant:L.value?"flat":"outlined"},{default:e(()=>[t(m,null,{default:e(()=>[o("mdi-view-list")]),_:1})]),_:1},8,["color","variant"])]),_:1}),t(c,{class:"ml-2",onClick:De,"prepend-icon":"mdi-eye-settings-outline",color:b.value?"primary":void 0,variant:b.value?"flat":"outlined"},{default:e(()=>[o(p(b.value?"隐藏系统插件":"显示系统插件"),1)]),_:1},8,["color","variant"]),t(c,{class:"ml-2","prepend-icon":"mdi-tune-vertical",color:"primary",variant:"outlined",onClick:Le},{default:e(()=>[o(" 平台命令配置 ")]),_:1})]),_:1}),t(B,{cols:"12",sm:"auto",md:"6",class:"ml-auto"},{default:e(()=>[n("div",yt,[t(Ge,{modelValue:Z.value,"onUpdate:modelValue":l[2]||(l[2]=a=>Z.value=a),density:"compact",label:"Search","prepend-inner-icon":"mdi-magnify",variant:"solo-filled",flat:"","hide-details":"","single-line":""},null,8,["modelValue"])]),_.message?(i(),y(G,{key:0,"max-width":"500px"},{activator:e(({props:a})=>[t(c,Ve(a,{icon:"",size:"small",color:"error",class:"ml-2",variant:"tonal"}),{default:e(()=>[t(m,null,{default:e(()=>[o("mdi-alert-circle")]),_:1}),t(We,{dot:"",color:"error",floating:""})]),_:2},1040)]),default:e(({isActive:a})=>[t(P,{class:"rounded-lg"},{default:e(()=>[t(O,{class:"headline d-flex align-center"},{default:e(()=>[t(m,{color:"error",class:"mr-2"},{default:e(()=>[o("mdi-alert-circle")]),_:1}),o(" 错误信息 ")]),_:1}),t(T,null,{default:e(()=>[n("p",kt,p(_.message),1),wt]),_:1}),t(F,null,{default:e(()=>[t(j),t(c,{color:"primary",onClick:r=>a.value=!1},{default:e(()=>[o("关闭")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1})):w("",!0)]),_:1})]),_:1}),t(qe,{"hide-on-leave":""},{default:e(()=>[L.value?(i(),h("div",bt,[t(P,{class:"rounded-lg overflow-hidden elevation-1"},{default:e(()=>[t($e,{headers:Ue,items:oe.value,loading:ee.value,"item-key":"name",hover:""},{loader:e(()=>[t(N,{class:"py-8 d-flex align-center justify-center"},{default:e(()=>[t(se,{indeterminate:"",color:"primary"}),xt]),_:1})]),"item.name":e(({item:a})=>[n("div",Ct,[n("div",null,[n("div",Vt,p(a.name),1),a.reserved?(i(),h("div",$t,[t(ae,{color:"primary",size:"x-small",class:"font-weight-medium"},{default:e(()=>[o("系统")]),_:1})])):w("",!0)])])]),"item.desc":e(({item:a})=>[n("div",zt,p(a.desc),1)]),"item.version":e(({item:a})=>[n("div",Et,[n("span",Pt,p(a.version),1),a.has_update?(i(),y(m,{key:0,color:"warning",size:"small",class:"ml-1"},{default:e(()=>[o("mdi-alert")]),_:1})):w("",!0),a.has_update?(i(),y(z,{key:1,activator:"parent"},{default:e(()=>[n("span",null,"有新版本: "+p(a.online_version),1)]),_:2},1024)):w("",!0)])]),"item.author":e(({item:a})=>[n("div",Ut,p(a.author),1)]),"item.status":e(({item:a})=>[t(ae,{color:a.activated?"success":"error",size:"small",class:"font-weight-medium",variant:a.activated?"flat":"outlined"},{default:e(()=>[o(p(a.activated?"启用":"禁用"),1)]),_:2},1032,["color","variant"])]),"item.actions":e(({item:a})=>[n("div",Dt,[t(Ce,{density:"comfortable",variant:"text",color:"primary"},{default:e(()=>[a.activated?(i(),y(c,{key:1,icon:"",size:"small",color:"error",onClick:r=>_e(a)},{default:e(()=>[t(m,null,{default:e(()=>[o("mdi-pause")]),_:1}),t(z,{activator:"parent",location:"top"},{default:e(()=>[o("点击禁用")]),_:1})]),_:2},1032,["onClick"])):(i(),y(c,{key:0,icon:"",size:"small",color:"success",onClick:r=>pe(a)},{default:e(()=>[t(m,null,{default:e(()=>[o("mdi-play")]),_:1}),t(z,{activator:"parent",location:"top"},{default:e(()=>[o("点击启用")]),_:1})]),_:2},1032,["onClick"])),t(c,{icon:"",size:"small",color:"info",onClick:r=>he(a.name)},{default:e(()=>[t(m,null,{default:e(()=>[o("mdi-refresh")]),_:1}),t(z,{activator:"parent",location:"top"},{default:e(()=>[o("重载")]),_:1})]),_:2},1032,["onClick"]),t(c,{icon:"",size:"small",onClick:r=>ve(a.name)},{default:e(()=>[t(m,null,{default:e(()=>[o("mdi-cog")]),_:1}),t(z,{activator:"parent",location:"top"},{default:e(()=>[o("配置")]),_:1})]),_:2},1032,["onClick"]),t(c,{icon:"",size:"small",onClick:r=>ge(a)},{default:e(()=>[t(m,null,{default:e(()=>[o("mdi-information")]),_:1}),t(z,{activator:"parent",location:"top"},{default:e(()=>[o("行为")]),_:1})]),_:2},1032,["onClick"]),a.repo?(i(),y(c,{key:2,icon:"",size:"small",onClick:r=>ye(a)},{default:e(()=>[t(m,null,{default:e(()=>[o("mdi-book-open-page-variant")]),_:1}),t(z,{activator:"parent",location:"top"},{default:e(()=>[o("文档")]),_:1})]),_:2},1032,["onClick"])):w("",!0),t(c,{icon:"",size:"small",color:"warning",onClick:r=>me(a.name),"v-show":a.has_update},{default:e(()=>[t(m,null,{default:e(()=>[o("mdi-update")]),_:1}),t(z,{activator:"parent",location:"top"},{default:e(()=>[o("更新")]),_:1})]),_:2},1032,["onClick","v-show"]),t(c,{icon:"",size:"small",color:"error",onClick:r=>fe(a.name),disabled:a.reserved},{default:e(()=>[t(m,null,{default:e(()=>[o("mdi-delete")]),_:1}),t(z,{activator:"parent",location:"top"},{default:e(()=>[o("卸载")]),_:1})]),_:2},1032,["onClick","disabled"])]),_:2},1024)])]),"no-data":e(()=>[n("div",St,[t(m,{size:"64",color:"info",class:"mb-4"},{default:e(()=>[o("mdi-puzzle-outline")]),_:1}),Lt,Rt])]),_:1},8,["items","loading"])]),_:1})])):(i(),h("div",Tt,[oe.value.length===0?(i(),y(N,{key:0,class:"text-center"},{default:e(()=>[t(B,{cols:"12",class:"pa-8"},{default:e(()=>[t(m,{size:"64",color:"info",class:"mb-4"},{default:e(()=>[o("mdi-puzzle-outline")]),_:1}),jt,It]),_:1})]),_:1})):w("",!0),t(N,null,{default:e(()=>[(i(!0),h(J,null,le(oe.value,a=>(i(),y(B,{cols:"12",md:"6",lg:"4",key:a.name,class:"pb-4"},{default:e(()=>[t(Ie,{extension:a,class:"h-120 rounded-lg",onConfigure:r=>ve(a.name),onUninstall:r=>fe(a.name),onUpdate:r=>me(a.name),onReload:r=>he(a.name),onToggleActivation:r=>a.activated?_e(a):pe(a),onViewHandlers:r=>ge(a),onViewReadme:r=>ye(a)},null,8,["extension","onConfigure","onUninstall","onUpdate","onReload","onToggleActivation","onViewHandlers","onViewReadme"])]),_:2},1024))),128))]),_:1})]))]),_:1}),ee.value?(i(),y(N,{key:0},{default:e(()=>[t(B,{cols:"12",class:"d-flex justify-center"},{default:e(()=>[t(se,{indeterminate:"",color:"primary",size:"48"})]),_:1})]),_:1})):w("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),t(G,{modelValue:M.value,"onUpdate:modelValue":l[5]||(l[5]=a=>M.value=a),"max-width":"900",persistent:""},{default:e(()=>[t(P,{class:"rounded-lg"},{default:e(()=>[t(Ke,{color:"primary",density:"comfortable",flat:""},{default:e(()=>[t(Je,{class:"text-white"},{default:e(()=>[o("平台命令可用性配置")]),_:1}),t(j),t(c,{icon:"",onClick:l[3]||(l[3]=a=>M.value=!1),variant:"text",color:"white"},{default:e(()=>[t(m,null,{default:e(()=>[o("mdi-close")]),_:1})]),_:1})]),_:1}),t(T,{class:"pt-4"},{default:e(()=>[Mt,t(Xe,{"model-value":q.value,class:"align-center justify-center",persistent:""},{default:e(()=>[t(se,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),u.platforms.length===0?(i(),h("div",At,[t(m,{icon:"mdi-alert",color:"warning",size:"64",class:"mb-4"}),Ht,Nt,t(c,{color:"primary",to:"/platforms",variant:"elevated"},{default:e(()=>[o("前往平台管理")]),_:1})])):(i(),y(Qe,{key:1,class:"rounded-lg overflow-hidden"},{default:e(()=>[t(Ye,{hover:"",class:"elevation-1"},{default:e(()=>[n("thead",null,[n("tr",null,[Bt,(i(!0),h(J,null,le(u.platforms,a=>(i(),h("th",{key:a.name},[n("div",Ot,[o(p(a.display_name)+" ",1),t(Ze,null,{activator:e(({props:r})=>[t(c,Ve({icon:"",density:"compact",variant:"text",size:"small"},r,{class:"ms-1"}),{default:e(()=>[t(m,null,{default:e(()=>[o("mdi-dots-vertical")]),_:1})]),_:2},1040)]),default:e(()=>[t(et,null,{default:e(()=>[t(X,{onClick:r=>te(a.name,!0)},{default:e(()=>[t(Y,null,{default:e(()=>[o("全选")]),_:1})]),_:2},1032,["onClick"]),t(X,{onClick:r=>te(a.name,!0,!1)},{default:e(()=>[t(Y,null,{default:e(()=>[o("全选普通插件")]),_:1})]),_:2},1032,["onClick"]),t(X,{onClick:r=>te(a.name,!0,!0)},{default:e(()=>[t(Y,null,{default:e(()=>[o("全选系统插件")]),_:1})]),_:2},1032,["onClick"]),t(X,{onClick:r=>te(a.name,!1)},{default:e(()=>[t(Y,null,{default:e(()=>[o("全不选")]),_:1})]),_:2},1032,["onClick"]),t(X,{onClick:r=>Te(a.name)},{default:e(()=>[t(Y,null,{default:e(()=>[o("反选")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)])]))),128))])]),n("tbody",null,[(i(!0),h(J,null,le(u.plugins,a=>(i(),h("tr",{key:a.name},[n("td",null,[n("div",Ft,[o(p(a.name)+" ",1),a.reserved?(i(),y(ae,{key:0,color:"primary",size:"x-small",class:"ml-2"},{default:e(()=>[o("系统")]),_:1})):w("",!0)]),n("div",Gt,p(a.desc),1)]),(i(!0),h(J,null,le(u.platforms,r=>(i(),h("td",{key:r.name},[t(tt,{modelValue:u.platform_enable[r.name][a.name],"onUpdate:modelValue":H=>u.platform_enable[r.name][a.name]=H,"hide-details":"",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]))),128))]))),128))])]),_:1})]),_:1}))]),_:1}),t(F,null,{default:e(()=>[t(j),t(c,{color:"grey",text:"",onClick:l[4]||(l[4]=a=>M.value=!1)},{default:e(()=>[o("关闭")]),_:1}),u.platforms.length>0?(i(),y(c,{key:0,color:"primary",onClick:Re},{default:e(()=>[o("保存")]),_:1})):w("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(G,{modelValue:D.value,"onUpdate:modelValue":l[7]||(l[7]=a=>D.value=a),width:"1000"},{default:e(()=>[t(P,null,{default:e(()=>[t(O,{class:"text-h5"},{default:e(()=>[o("插件配置")]),_:1}),t(T,null,{default:e(()=>[V.metadata?(i(),y(Ae,{key:0,metadata:V.metadata,iterable:V.config,metadataKey:W.value},null,8,["metadata","iterable","metadataKey"])):(i(),h("p",Wt,"这个插件没有配置"))]),_:1}),t(F,null,{default:e(()=>[t(j),t(c,{color:"blue-darken-1",variant:"text",onClick:Se},{default:e(()=>[o("保存并关闭")]),_:1}),t(c,{color:"blue-darken-1",variant:"text",onClick:l[6]||(l[6]=a=>D.value=!1)},{default:e(()=>[o("关闭")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(G,{modelValue:d.show,"onUpdate:modelValue":l[8]||(l[8]=a=>d.show=a),width:"700",persistent:""},{default:e(()=>[t(P,null,{default:e(()=>[t(O,{class:"text-h5"},{default:e(()=>[o(p(d.title),1)]),_:1}),t(T,null,{default:e(()=>[d.statusCode===0?(i(),y(at,{key:0,indeterminate:"",color:"primary",class:"mb-4"})):w("",!0),d.statusCode!==0?(i(),h("div",qt,[t(m,{class:"mb-6",color:d.statusCode===1?"success":"error",icon:d.statusCode===1?"mdi-check-circle-outline":"mdi-alert-circle-outline",size:"128"},null,8,["color","icon"]),n("div",Kt,p(d.result),1)])):w("",!0),n("div",Jt,[Xt,t(He,{historyNum:"10",style:{height:"200px","margin-top":"16px"}})])]),_:1}),t(F,null,{default:e(()=>[t(j),t(c,{color:"blue-darken-1",variant:"text",onClick:de},{default:e(()=>[o("关闭")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(G,{modelValue:v.value,"onUpdate:modelValue":l[10]||(l[10]=a=>v.value=a),width:"1200"},{default:e(()=>[t(P,null,{default:e(()=>[t(O,{class:"text-h5"},{default:e(()=>[o(p(k.value.name)+" 插件行为",1)]),_:1}),t(T,null,{default:e(()=>[t($e,{style:{"font-size":"17px"},headers:Pe,items:k.value.handlers,"item-key":"name"},{"header.id":e(({column:a})=>[n("p",Yt,p(a.title),1)]),"item.event_type":e(({item:a})=>[o(p(a.event_type),1)]),"item.desc":e(({item:a})=>[o(p(a.desc),1)]),"item.type":e(({item:a})=>[t(ae,{color:"success"},{default:e(()=>[o(p(a.type),1)]),_:2},1024)]),"item.cmd":e(({item:a})=>[n("span",Qt,p(a.cmd),1)]),_:1},8,["items"])]),_:1}),t(F,null,{default:e(()=>[t(j),t(c,{color:"blue-darken-1",variant:"text",onClick:l[9]||(l[9]=a=>v.value=!1)},{default:e(()=>[o("关闭")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(Be,{timeout:2e3,elevation:"24",color:I.value,modelValue:U.value,"onUpdate:modelValue":l[11]||(l[11]=a=>U.value=a)},{default:e(()=>[o(p(E.value),1)]),_:1},8,["color","modelValue"]),t(Me,{ref_key:"wfr",ref:Ee},null,512),t(gt,{show:S.show,"onUpdate:show":l[12]||(l[12]=a=>S.show=a),"plugin-name":S.pluginName,"repo-url":S.repoUrl},null,8,["show","plugin-name","repo-url"])],64))}},ia=nt(Zt,[["__scopeId","data-v-88998581"]]);export{ia as default};
